

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Uncertainty Problems &#8212; Qiskit Aqua 0.4.0 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <script type="text/javascript" src="_static/bootstrap.min.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
<div id="head" class="head">
    <a href="https://qiskit.org/aqua">Qiskit Aqua</a>
</div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
<li id="toc-toggle">
<a class="btn btn-primary" role="button" data-toggle="collapse"
   href=".sphinxsidebar" aria-expanded="false" aria-controls="collapseExample">
  TOC</a> |
</li>

        <li class="nav-item nav-item-0"><a href="index.html">Qiskit Aqua 0.4.0 documentation</a> &#187;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/qiskit-logo-white-no-margin.gif" alt="Logo"/>
            </a></p>
<p class="logo-description">Qiskit Aqua</p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="aqua.html">Qiskit Aqua</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/uncertainty_problem.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uncertainty-problems">
<span id="id1"></span><h1>Uncertainty Problems<a class="headerlink" href="#uncertainty-problems" title="Permalink to this headline">¶</a></h1>
<p>Uncertainty is present in most realistic applications, and often it is necessary to evaluate
the behavior of a a system under uncertain data.
For instance, in finance, it is of interest to evaluate expected value or risk metrics of
financial products that depend on underlying stock prices, economic factors, or changing interest rates.
Classically, such problems are often evaluated using Monte Carlo simulation.
However, Monte Carlo simulation does not converge very fast, which implies that large numbers of samples
are required to achieve estimators of reasonable accuracy and confidence.
In quantum computing, <em>amplitude estimation</em> can be used instead, which can lead to a quadratic speed-up.
Thus, millions of classical samples could be replaced by a few thousand quantum samples.</p>
<p><em>Amplitude estimation</em> is a derivative of <em>quantum phase estimation</em> applied to a particular operator A.
A is assumed to operate on (n+1) qubits (+ possible ancillas) where the n qubits represent the uncertainty
(reference to random_distribution) and the last qubit is used to represent the (normalized) objective value
as its amplitude.
In other words, A is constructed such that the probability of measuring a ‘1’ in the objective qubit is equal to the
value of interest.
An implementation of an uncertainty problem is assumed to provide a dictionary with parameter,
particularly containing the index of the qubit used for the objective:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">...</span>
            <span class="s1">&#39;i_objective&#39;</span><span class="p">:</span> <span class="n">i_objective</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>Since the value of interest has to be normalized to lie in [0, 1], an uncertainty problem also provides a function:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">value_to_estimator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
<p>which is used to map the result of <em>amplitude estimation</em> to the range of interest.
The standard implementation is just the identity and can be overridden when needed.</p>
<p>In the following, we introduce the available implementations of this class.</p>
<div class="section" id="european-call-option">
<h2>European Call Option<a class="headerlink" href="#european-call-option" title="Permalink to this headline">¶</a></h2>
<div class="topic">
<p class="topic-title first">Expected Value</p>
<p>Suppose a European call option with strike price <span class="math notranslate nohighlight">\(K\)</span> and an underlying asset whose spot price at maturity <span class="math notranslate nohighlight">\(S_T\)</span>
follows a given random distribution.
The corresponding payoff function is defined as <span class="math notranslate nohighlight">\(\max \{ S - K, 0 \}\)</span>.</p>
<p>The <em>European call option - expected value</em> uncertainty problem takes the following input parameters:</p>
<ul class="simple">
<li>univariate random distribution for spot price (reference)</li>
<li>strike price <span class="math notranslate nohighlight">\(K\)</span></li>
<li>approximation scaling parameter <span class="math notranslate nohighlight">\(c_approx\)</span> which specifies how well the objective function is approximated (needs to be synced with the number of evaluation qubits in amplitude estimation). For more details on the approximation, see <a class="reference external" href="https://arxiv.org/abs/1806.06893">https://arxiv.org/abs/1806.06893</a>.</li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># construct circuit factory for random distribution</span>
<span class="n">uncertainty_model</span> <span class="o">=</span> <span class="n">LogNormalDistribution</span><span class="p">(</span><span class="n">num_uncertainty_qubits</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">)</span>

<span class="c1"># set the strike price (should be within the low and the high value of the uncertainty)</span>
<span class="n">strike_price</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># set the approximation scaling for the payoff function</span>
<span class="n">c_approx</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1"># construct circuit factory for payoff function</span>
<span class="n">european_call</span> <span class="o">=</span> <span class="n">EuropeanCallExpectedValue</span><span class="p">(</span>
    <span class="n">uncertainty_model</span><span class="p">,</span>
    <span class="n">strike_price</span><span class="o">=</span><span class="n">strike_price</span><span class="p">,</span>
    <span class="n">c_approx</span><span class="o">=</span><span class="n">c_approx</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="topic">
<p class="topic-title first">Delta</p>
<p>The $Delta$, of an option is defines as the derivative of the expected payfoff (respectively the price) with respect to the spot price.
For an European call option it can be defined as <span class="math notranslate nohighlight">\(\Delta = P\left[ S_T \geq K \right]\)</span>.</p>
<p>The <em>European call option - Delta</em> uncertainty problem takes the following input parameters:</p>
<ul class="simple">
<li>univariate random distribution for spot price (reference)</li>
<li>the strike price <span class="math notranslate nohighlight">\(K\)</span></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">european_call_delta</span> <span class="o">=</span> <span class="n">EuropeanCallDelta</span><span class="p">(</span>
    <span class="n">uncertainty_model</span><span class="p">,</span>
    <span class="n">strike_price</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that - in contrast to the expected value - the approximation scaling is not required here.</p>
</div>
</div>
<div class="section" id="fixed-income-asset-pricing">
<h2>Fixed-Income Asset Pricing<a class="headerlink" href="#fixed-income-asset-pricing" title="Permalink to this headline">¶</a></h2>
<div class="topic">
<p class="topic-title first">Expected Value</p>
<p>Here, we seek to price a fixed-income asset knowing the distributions describing the relevant interest rates.
The cash flows <span class="math notranslate nohighlight">\(c_t\)</span> of the asset and the dates at which they occur are known.
The total value <span class="math notranslate nohighlight">\(V\)</span> of the asset is thus the expectation value of:</p>
<div class="math notranslate nohighlight">
\[`V = \sum_{t=1}^T \frac{c_t}{(1+r_t)^t}`\]</div>
<p>Each cash flow is treated as a zero coupon bond with a corresponding interest rate $r_t$ that depends on its maturity.
The user must specify the distribution modelling the uncertainty in each <span class="math notranslate nohighlight">\(r_t\)</span> (possibly correlated)
as well as the number of qubits he wishes to use to sample each distribution.
In this example we expand the value of the asset to first order in the interest rates <span class="math notranslate nohighlight">\(r_t\)</span>.
This corresponds to studying the asset in terms of its duration.</p>
<p>The <em>Fixed-Income - Expected Value</em> uncertainty problem takes the following parameters:</p>
<ul class="simple">
<li>multivariate random distribution: <span class="math notranslate nohighlight">\(u\)</span></li>
<li>affine map from the random distribution to interest rates (e.g. from a principal component analysis): <span class="math notranslate nohighlight">\(A\)</span>, <span class="math notranslate nohighlight">\(b\)</span></li>
<li>cash flow: <span class="math notranslate nohighlight">\(c\)</span></li>
<li>approximation scaling parameter <span class="math notranslate nohighlight">\(c_approx\)</span> which specifies how well the objective function is approximated (needs to be synced with the number of evaluation qubits in amplitude estimation). For more details on the approximation, see <a class="reference external" href="https://arxiv.org/abs/1806.06893">https://arxiv.org/abs/1806.06893</a>.</li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># construct corresponding distribution</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">MultivariateNormalDistribution</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>

<span class="c1"># can be used in case a principal component analysis has been done to derive the random distribution,</span>
<span class="c1"># ignored in this example</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># specify cash flow</span>
<span class="n">cf</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>

<span class="c1"># specify approximation factor</span>
<span class="n">c_approx</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1"># get fixed income circuit appfactory</span>
<span class="n">fixed_income</span> <span class="o">=</span> <span class="n">FixedIncomeExpectedValue</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">cf</span><span class="p">,</span> <span class="n">c_approx</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
<li id="toc-toggle">
<a class="btn btn-primary" role="button" data-toggle="collapse"
   href=".sphinxsidebar" aria-expanded="false" aria-controls="collapseExample">
  TOC</a> |
</li>

        <li class="nav-item nav-item-0"><a href="index.html">Qiskit Aqua 0.4.0 documentation</a> &#187;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018 IBM.
      Last updated on 2018/12/14.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>